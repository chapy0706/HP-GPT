<!-- /AGENTS.md -->

# エージェント運用ガイド（Claude Code / Codex 共通）

このリポジトリは「挙動を壊さない」ために、E2E（Playwright）を品質ゲートにしている。

## 役割分担（おすすめ）

- ChatGPT: 方針決定 / 仕様（spec）整備 / トレードオフの明文化
- Claude Code: 最小コンテキストで設計レビュー、調査、パッチ案
- Codex: 実装と反復テスト（小さく刻んでコミット）

## 実装ルール

1. 1回の変更は小さく
   - 変更理由が1つになる粒度で
   - “ついでに” をやらない

2. まず spec を読む
   - `docs/specs/active/site-behavior.md` が挙動の基準

3. 変更後は必ず検証
   - `make verify`（ローカルでも必須）
   - 証拠が必要なら `make evidence`

4. 禁止
   - 秘密情報（鍵/トークン/個人情報）を扱う
   - 破壊的なコマンド（`rm -rf`, `sudo`, `curl | sh` など）
   - まとめて全ファイルの整形や大規模リネーム

## 典型的な進め方（Codex向け）

1. 変更対象の画面と要件を確認
2. 影響範囲を推定（どのDOM/イベントが絡むか）
3. 最小の修正
4. `make verify`
5. 失敗したら、差分を最小に戻しながら原因を切り分け
